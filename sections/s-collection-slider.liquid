{% assign collection = section.settings.collection %}

<div class="s-collection-slider-wrap">

  <div class="s-collection-slider-header">
    <h2>{{ section.settings.heading }}</h2>
    <p>{{ section.settings.description }}</p>  
  </div>

  <div class="s-collection-slider-wrapper">
    <div class="s-collection-slider">
      {% for product in collection.products %}
        <div class="s-collection-slider-product-wrap">
          <div class="s-collection-slider-product">
            <a class="collection-slider-image-link" href="{{ product.url }}">
              <img src="{{ product.featured_image | img_url: 'large' }}" alt={{ product.title }}>
            </a>
            <div class="s-collection-slider-description">
              <h4>{{ product.title }}</h4>
              <p>{{ product.description | strip_html | truncate: 100, "..." }}</p>

              <a class="s-btn" href="{{ product.url }}">Shop Now</a>
            </div>
          </div>
        </div>
      {% endfor %}
    </div>

    <div class="s-collection-slider-prev">
      <svg aria-labelledby="chevron-3" class="Icon-module_base__iPRbu Icon-module_dark__3KB8t" data-testid="data-testid-Icon" focusable="false" height="16" role="img" tabindex="-1" viewBox="0 0 50 50" width="16" style="height: 16px; width: 16px;"><title id="chevron-3">chevron</title><g><polygon points="25,31.3 4.2,10.5 0.1,14.6 25,39.5 50,14.6 45.9,10.5"></polygon></g></svg>
    </div>
    <div class="s-collection-slider-next">
      <svg aria-labelledby="chevron-3" class="Icon-module_base__iPRbu Icon-module_dark__3KB8t" data-testid="data-testid-Icon" focusable="false" height="16" role="img" tabindex="-1" viewBox="0 0 50 50" width="16" style="height: 16px; width: 16px;"><title id="chevron-3">chevron</title><g><polygon points="25,31.3 4.2,10.5 0.1,14.6 25,39.5 50,14.6 45.9,10.5"></polygon></g></svg>
    </div>
  </div>  
</div>

<script>
$('#shopify-section-{{section.id}} .s-collection-slider').slick({
  slidesToShow: 4.2,
  slidesToScroll: 1,
  infinite: false,
  speed: 500,
  prevArrow: '.s-collection-slider-prev',
  nextArrow: '.s-collection-slider-next',
  dots: false,
  responsive: [
    {
      breakpoint: 1280,
      settings: {
        slidesToShow: 2.8,
        slidesToScroll: 2.8
      }
    },
    {
      breakpoint: 600,
      settings: {
        slidesToShow: 1.5,
        slidesToScroll: 1.5
      }
    },
    {
      breakpoint: 480,
      settings: {
        slidesToShow: 1.2,
        slidesToScroll: 1.2
      }
    }
  ]
});
</script>

<style>
.s-collection-slider-section {
	width: 100%;
    padding: 60px 15px;
    padding-right: 0;
}
.s-collection-slider-wrap {
}
.s-collection-slider-wrapper {
    position: relative;
}  
.s-collection-slider-header {
	max-width: 75%;
    text-align: center;
    margin: auto;
}
.s-collection-slider-header>h2 {

}
.s-collection-slider-header>p {

}
.s-collection-slider {

}
.s-collection-slider-product-wrap {
	margin-right: 16px;
    min-width: 22vw;
    padding: 0;
}
.s-collection-slider-product {
	background-color: #e8e2d8;
    border-radius: 1rem;
    overflow: hidden;
    display: -ms-flexbox;
    display: flex;
    -ms-flex-direction: column;
    flex-direction: column;
    -ms-flex-pack: start;
    justify-content: start;
    padding: 0 !important;
    background-position: 50%;
    background-size: cover;
    height: 100%;
}
.s-collection-slider-product a.collection-slider-image-link {
	display: block;
    width: 100%;
    height: 200px;
}
.s-collection-slider-product a.collection-slider-image-link>img {	
    width: 100%;
    height: 100%;
    object-fit: cover;
}
.s-collection-slider-description {
    width: 100%;
    height: 240px;
    padding: 15px;
    position: relative;
}
.s-collection-slider-description>h4 {
    margin: 0;
}
.s-collection-slider-description>p {
    margin: 0;
}
.s-collection-slider-description .s-btn {
    width: 200px;
    position: absolute;
    bottom: 30px;
    left: 50%;
    transform: translateX(-50%);
}
.s-collection-slider-prev {
    position: absolute;
    width: auto;
    background-color: #873c17cc;
    left: 0;
    top: 50%;
    z-index: 8;
    height: 80px !important;
    width: 80px !important;
    transform: translateY(-50%);
    /* transition: all .5s cubic-bezier(.215,.61,.355,1); */
    -ms-flex-align: center;
    align-items: center;
    -ms-flex-pack: center;
    justify-content: center;
    cursor: pointer;
}
.s-collection-slider-prev svg {
    display: block;
    position: absolute;
    left: 50%;
    top: 50%;
    transform: rotate(90deg) translate(-40%, 40%);
    fill: #fff;
}
.s-collection-slider-next {
    position: absolute;
    width: auto;
    background-color: #873c17cc;
    right: 0;
    top: 50%;
    z-index: 8;
    height: 80px !important;
    width: 80px !important;
    transform: translateY(-50%);
    /* transition: all .5s cubic-bezier(.215,.61,.355,1); */
    -ms-flex-align: center;
    align-items: center;
    -ms-flex-pack: center;
    justify-content: center;
    cursor: pointer;
}
.s-collection-slider-next svg {
    display: block;
    position: absolute;
    left: 50%;
    top: 50%;
    transform: rotate(-90deg) translate(40%, -40%);
    fill: #fff;
}
.s-collection-slider-prev:hover, .s-collection-slider-next:hover {
    background-color: #b42a18cc;
}

  
@media only screen and (max-width: 600px) {
  .s-collection-slider-prev, .s-collection-slider-next {
    width: 60px !important;
    height: 60px !important;
  }
}
</style>

{% schema %}
  {
    "name": "S collection slider",
    "tag": "section",
    "class": "s-collection-slider-section",
    "settings": [
      {
        "type": "text",
        "id": "heading",
        "label": "Heading"
      },
      {
        "type": "textarea",
        "id": "description",
        "label": "Description"
      },
      {
        "type": "collection",
        "id": "collection",
        "label": "Collection"
      }
    ],
    "presets": [
      {
        "name": "S collection slider"
      }
    ]
  }
{% endschema %}
